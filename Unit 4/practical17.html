<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Practical 17: Event Listeners</title>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        
        .box {
            width: 200px;
            height: 100px;
            border: 2px solid #333;
            background-color: lightgray;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            transition: background 0.3s;
        }

        .output-text {
            font-size: 1.2rem;
            color: blue;
            margin-bottom: 20px;
        }

        button { padding: 10px 20px; cursor: pointer; }
    </style>
</head>
<body>

    <h2>Event Listener Demo</h2>

    <p>1. Hover over the box below (Mouse Event):</p>
    <div id="hoverBox" class="box">Hover Me!</div>

    <p>2. Press any key on your keyboard (Keyboard Event):</p>
    <p class="output-text">Last Key Pressed: <span id="keyDisplay">None</span></p>

    <hr>

    <button id="stopBtn">Stop All Interactivity (removeEventListener)</button>
    <p><small><em>Clicking this will stop the hover effect and key logging.</em></small></p>

    <script>
        // Select elements
        const box = document.getElementById('hoverBox');
        const keyDisplay = document.getElementById('keyDisplay');
        const stopBtn = document.getElementById('stopBtn');

        // --- 1. Define Named Functions (Required for removal) ---
        
        // Function for Mouse Over
        function highlightBox() {
            box.style.backgroundColor = 'salmon';
            box.textContent = "Mouse Inside!";
        }

        // Function for Mouse Out
        function resetBox() {
            box.style.backgroundColor = 'lightgray';
            box.textContent = "Hover Me!";
        }

        // Function for Keyboard Press
        function logKey(event) {
            // 'event.key' holds the value of the key pressed
            keyDisplay.textContent = event.key;
        }

        // --- 2. Add Event Listeners ---

        // Mouse Events
        box.addEventListener('mouseover', highlightBox);
        box.addEventListener('mouseout', resetBox);

        // Keyboard Event (attached to the whole window)
        window.addEventListener('keydown', logKey);

        // --- 3. Remove Event Listeners ---
        
        stopBtn.addEventListener('click', function() {
            // This removes the specific functions we added earlier
            box.removeEventListener('mouseover', highlightBox);
            box.removeEventListener('mouseout', resetBox);
            window.removeEventListener('keydown', logKey);

            // Visual feedback that it stopped
            stopBtn.textContent = "Interactivity Stopped";
            stopBtn.disabled = true;
            box.textContent = "Listeners Removed";
            box.style.backgroundColor = "#ddd"; 
            alert("Event listeners removed! Mouse and keyboard will no longer trigger updates.");
        });

    </script>
</body>
</html>